"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2941],{2941:(X,y,l)=>{l.r(y),l.d(y,{ClientsChatsModule:()=>et});var x=l(177),T=l(3477),d=l(5933),R=l(9417),$=l(4127),V=l(8676),N=l(8833),z=l(1667),I=l(467),A=l(5083);l(5051);const O=(0,A.F3)("VoiceRecorder",{web:()=>l.e(2321).then(l.bind(l,2321)).then(o=>new o.VoiceRecorderWeb)});var D=l(1413),Y=l(152),L=l(8032),v=l.n(L),e=l(4438),W=l(9451),U=l(2242),H=l(5431),Q=l.n(H);let K=(()=>{var o;class a{constructor(){window.io=Q(),this.initEcho()}initEcho(){this.echo=new U.Ay({broadcaster:"socket.io",host:"https://chat.right2shout.in:6001",transports:["websocket"],forceTLS:!0,wssPort:6001}),this.socket=this.echo.connector.socket,this.socket.on("connect",()=>{console.log("%c[Socket.IO] Connected","color: green")}),this.socket.on("disconnect",t=>{console.log("%c[Socket.IO] Disconnected:","color: red",t)}),this.socket.on("reconnect_attempt",()=>{console.log("%c[Socket.IO] Attempting to reconnect...","color: orange")}),this.socket.on("reconnect",t=>{console.log("%c[Socket.IO] Reconnected after attempts:","color: green",t)}),this.socket.on("reconnect_error",t=>{console.log("%c[Socket.IO] Reconnect error:","color: red",t)}),this.socket.on("reconnect_failed",()=>{console.log("%c[Socket.IO] Reconnect failed","color: darkred")})}listenToChannel(t,i,s){this.echo.channel(t).listen(i,r=>{s(r)})}}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),a})();var J=l(3459),Z=l(2408),E=l(494),F=l(8819),q=l(1950),ee=l(9850);const te=["loader"],ne=["chat_preview"],ie=["dialNumberModal"],oe=["chat_previewIon_content"],se=["container"],ae=o=>({pointerEvent:o}),re=o=>({"selected-match":o}),ce=o=>({"slide-in-left":o});function le(o,a){1&o&&(e.j41(0,"div",29),e.nrm(1,"ion-img",30),e.k0s())}function de(o,a){if(1&o&&(e.j41(0,"ion-col",42)(1,"div",43),e.EFF(2),e.k0s()()),2&o){const n=e.XpG().$implicit;e.R7$(2),e.JRh(n.unreadcount?n.unreadcount:"")}}function _e(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-row",31),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG();return e.Njj(s.hasCommonId(s.allChats,s.allChats1)?s.openChat_previewModal(i):s.whatsAppNumberCheck(i))}),e.j41(1,"ion-col",32)(2,"div",33),e.nrm(3,"ion-img",34),e.k0s()(),e.j41(4,"ion-col",35)(5,"ion-row")(6,"ion-col",36)(7,"span",37),e.EFF(8),e.k0s()(),e.j41(9,"ion-col",38)(10,"span"),e.EFF(11),e.nI1(12,"date"),e.k0s()()(),e.j41(13,"ion-row"),e.nrm(14,"ion-col",39),e.j41(15,"ion-col",36)(16,"span",40),e.EFF(17),e.k0s()(),e.DNE(18,de,3,1,"ion-col",41),e.k0s()()()}if(2&o){const n=a.$implicit;e.R7$(8),e.JRh(n.customer_name),e.R7$(3),e.SpI("",e.i5U(12,4,n.latest_message_time,"hh:mm a")," "),e.R7$(6),e.SpI(" ",n.latest_message_content," "),e.R7$(),e.Y8G("ngIf",n.unreadcount)}}function pe(o,a){1&o&&(e.j41(0,"ion-row")(1,"ion-col",23)(2,"span",44),e.EFF(3,"No Active Chats"),e.k0s()()())}function he(o,a){1&o&&(e.j41(0,"div",29),e.nrm(1,"ion-spinner",55),e.k0s())}function me(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-row")(1,"ion-col",67),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.onOnetoOneChatSearch())}),e.j41(2,"span"),e.EFF(3," Search "),e.k0s()()()}}function ge(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-toolbar",56)(1,"ion-buttons",57),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onIndividualChatBack())}),e.nrm(2,"ion-icon",58),e.k0s(),e.j41(3,"ion-row")(4,"ion-col",42),e.nrm(5,"ion-img",34),e.k0s(),e.j41(6,"ion-col",59)(7,"ion-row",60)(8,"ion-col",61)(9,"div")(10,"div",37)(11,"span"),e.EFF(12),e.k0s()()()(),e.j41(13,"ion-col",62),e.nrm(14,"ion-icon",63),e.k0s(),e.j41(15,"ion-col",64),e.nrm(16,"ion-icon",65),e.k0s(),e.j41(17,"ion-popover",66),e.DNE(18,me,4,0,"ng-template"),e.k0s()()()()()}if(2&o){const n=e.XpG(2);e.R7$(12),e.JRh(n.selectedChat&&""!=n.selectedChat&&null!=n.selectedChat?null==n.selectedChat?null:n.selectedChat.customer_name:null==n.allChats1||null==n.allChats1[0]?null:n.allChats1[0].customer_name)}}function ue(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-toolbar")(1,"div",68)(2,"ion-icon",69),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return i.isOnetoOneChatSearch=!1,i.oneToOneChatSearch="",e.Njj(i.currentMatchIndex=-1)}),e.k0s(),e.j41(3,"ion-searchbar",70),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG(2);return e.DH7(s.oneToOneChatSearch,i)||(s.oneToOneChatSearch=i),e.Njj(i)}),e.bIt("ionInput",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onOneToOneSearchChange())}),e.k0s(),e.j41(4,"ion-icon",71),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.navigateMatch("prev"))}),e.k0s(),e.j41(5,"ion-icon",72),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.navigateMatch("next"))}),e.k0s()()()}if(2&o){const n=e.XpG(2);e.R7$(3),e.R50("ngModel",n.oneToOneChatSearch),e.Y8G("showClearButton","never")("showCancelButton",!1)}}function fe(o,a){if(1&o&&(e.j41(0,"label",78)(1,"span",79),e.EFF(2),e.k0s(),e.nrm(3,"ion-radio",80),e.k0s()),2&o){const n=a.$implicit;e.R7$(2),e.JRh(n.exec_name),e.R7$(),e.Y8G("value",n.exec_id)}}function Ce(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-row")(1,"ion-col",73)(2,"div",74)(3,"span",75),e.EFF(4,"Assignees :"),e.k0s(),e.j41(5,"ion-radio-group",76),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG(2);return e.DH7(s.selectedExec,i)||(s.selectedExec=i),e.Njj(i)}),e.bIt("ionChange",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onExecChange(i))}),e.DNE(6,fe,4,2,"label",77),e.k0s()()()()}if(2&o){const n=e.XpG(2);e.R7$(5),e.R50("ngModel",n.selectedExec),e.R7$(),e.Y8G("ngForOf",null==n.one2oneChats?null:n.one2oneChats.executives)}}function xe(o,a){if(1&o){const n=e.RV6();e.j41(0,"span",96),e.nI1(1,"highlight"),e.bIt("longPress",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(5);return e.Njj(s.onCopyMessage(i.text))})("click",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(5);return e.Njj(s.onNumberClick(i.text))}),e.k0s()}if(2&o){const n=e.XpG().$implicit,t=e.XpG(5);e.Y8G("innerHTML",e.i5U(1,1,n.text,t.oneToOneChatSearch),e.npT)}}function ve(o,a){if(1&o&&(e.nrm(0,"span",97),e.nI1(1,"highlight")),2&o){const n=e.XpG().$implicit,t=e.XpG(5);e.Y8G("innerHTML",e.i5U(1,1,n.text,t.oneToOneChatSearch),e.npT)}}function be(o,a){if(1&o&&(e.qex(0),e.DNE(1,xe,2,4,"span",94)(2,ve,2,4,"span",95),e.bVm()),2&o){const n=a.$implicit;e.R7$(),e.Y8G("ngIf",n.isPhoneNumber),e.R7$(),e.Y8G("ngIf",!n.isPhoneNumber)}}function Pe(o,a){if(1&o&&(e.j41(0,"ion-col",null,3)(2,"div",92),e.DNE(3,be,3,2,"ng-container",93),e.nI1(4,"lineBreaks"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.Y8G("title",n.content),e.R7$(),e.Y8G("ngForOf",e.bMT(4,2,n.content))}}function we(o,a){1&o&&(e.j41(0,"span",98),e.EFF(1,"Edited"),e.k0s())}function je(o,a){if(1&o&&(e.j41(0,"ion-item-sliding")(1,"ion-item",82)(2,"ion-row")(3,"ion-col",83)(4,"div",84)(5,"span",85),e.qSk(),e.j41(6,"svg",86),e.nrm(7,"path",87)(8,"path",88),e.k0s()(),e.joV(),e.j41(9,"div",89)(10,"ion-row"),e.DNE(11,Pe,5,4,"ion-col",27),e.k0s(),e.j41(12,"ion-row")(13,"ion-col",90),e.DNE(14,we,2,0,"span",91),e.j41(15,"span"),e.EFF(16),e.nI1(17,"date"),e.k0s()()()()()()()()()),2&o){const n=e.XpG().$implicit;e.R7$(11),e.Y8G("ngIf",n.content),e.R7$(3),e.Y8G("ngIf","1"==n.edited),e.R7$(2),e.JRh(e.i5U(17,3,n.created_at,"hh:mm a"))}}function Ie(o,a){if(1&o&&e.nrm(0,"ion-img",112),2&o){const n=e.XpG(2).$implicit;e.Y8G("photoGallery","https://chat.right2shout.in"+n.attachment_path)("src","https://chat.right2shout.in"+n.attachment_path)}}function Me(o,a){if(1&o&&(e.j41(0,"span",21),e.EFF(1),e.k0s()),2&o){const n=e.XpG(3).$implicit;e.R7$(),e.SpI(" ",n.attachment_name,"")}}function ke(o,a){if(1&o){const n=e.RV6();e.j41(0,"a",113),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG(2);return e.Njj(s.downloadFileFromUrl(i.attachment_path,i.attachment_name))}),e.nrm(1,"ion-img",114),e.DNE(2,Me,2,1,"span",115),e.k0s()}if(2&o){const n=e.XpG(2).$implicit;e.Y8G("href","https://chat.right2shout.in/"+n.attachment_path,e.B4B),e.R7$(2),e.Y8G("ngIf",null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".pdf"))}}function ye(o,a){if(1&o){const n=e.RV6();e.j41(0,"video",116,4),e.bIt("touchstart",function(){e.eBV(n);const i=e.XpG(4);return e.Njj(i.goFullScreen())}),e.nrm(2,"source",117),e.EFF(3," Your browser does not support the video tag. "),e.k0s()}if(2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.Y8G("src","https://chat.right2shout.in"+n.attachment_path,e.B4B)}}function Oe(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-row",118)(1,"ion-col",12)(2,"button",119),e.bIt("click",function(){e.eBV(n);const i=e.sdS(6),s=e.XpG(4);return e.Njj(s.togglePlay(i))}),e.nrm(3,"ion-icon",120),e.k0s(),e.j41(4,"ion-range",121),e.bIt("ionChange",function(i){e.eBV(n);const s=e.sdS(6),r=e.XpG(4);return e.Njj(r.seekAudio(i,s))}),e.k0s()(),e.j41(5,"audio",122,5),e.bIt("loadedmetadata",function(){e.eBV(n);const i=e.sdS(6),s=e.XpG(4);return e.Njj(s.setDuration(i))})("timeupdate",function(){e.eBV(n);const i=e.sdS(6),s=e.XpG(4);return e.Njj(s.updateProgress(i))})("ended",function(){e.eBV(n);const i=e.XpG(4);return e.Njj(i.audioEnded())}),e.nrm(7,"source",123),e.k0s()()}if(2&o){const n=e.XpG(2).$implicit,t=e.XpG(2);e.R7$(3),e.Y8G("name",t.isPlaying?"pause":"play"),e.R7$(),e.Y8G("value",t.currentTime)("min",0)("max",t.duration),e.R7$(3),e.Y8G("src","https://chat.right2shout.in"+n.attachment_path,e.B4B)}}function Te(o,a){if(1&o){const n=e.RV6();e.j41(0,"span",96),e.nI1(1,"highlight"),e.bIt("longPress",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(5);return e.Njj(s.onCopyMessage(i.text))})("click",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(5);return e.Njj(s.onNumberClick(i.text))}),e.k0s()}if(2&o){const n=e.XpG().$implicit,t=e.XpG(5);e.Y8G("innerHTML",e.i5U(1,1,n.text,t.oneToOneChatSearch),e.npT)}}function Re(o,a){if(1&o&&(e.nrm(0,"span",97),e.nI1(1,"highlight")),2&o){const n=e.XpG().$implicit,t=e.XpG(5);e.Y8G("innerHTML",e.i5U(1,1,n.text,t.oneToOneChatSearch),e.npT)}}function Ee(o,a){if(1&o&&(e.qex(0),e.DNE(1,Te,2,4,"span",94)(2,Re,2,4,"span",95),e.bVm()),2&o){const n=a.$implicit;e.R7$(),e.Y8G("ngIf",n.isPhoneNumber),e.R7$(),e.Y8G("ngIf",!n.isPhoneNumber)}}function Ge(o,a){if(1&o&&(e.j41(0,"ion-col",null,3)(2,"div",92),e.DNE(3,Ee,3,2,"ng-container",93),e.nI1(4,"lineBreaks"),e.k0s()()),2&o){const n=e.XpG(2).$implicit;e.R7$(2),e.Y8G("title",n.content),e.R7$(),e.Y8G("ngForOf",e.bMT(4,2,n.content))}}function Se(o,a){if(1&o&&(e.j41(0,"ion-col",124),e.EFF(1),e.nI1(2,"date"),e.k0s()),2&o){const n=e.XpG(4);e.R7$(),e.JRh(e.i5U(2,1,n.currentTime,"mm:ss"))}}function Ne(o,a){1&o&&(e.j41(0,"span",98),e.EFF(1,"Edited"),e.k0s())}function Fe(o,a){1&o&&e.nrm(0,"ion-img",125)}function Be(o,a){1&o&&e.nrm(0,"ion-icon",126)}function Xe(o,a){if(1&o&&(e.j41(0,"ion-item-sliding")(1,"ion-item",82)(2,"ion-row",99)(3,"ion-col",83)(4,"div",84)(5,"span"),e.qSk(),e.j41(6,"svg",100),e.nrm(7,"path",101)(8,"path",102),e.k0s()(),e.joV(),e.j41(9,"div",103),e.DNE(10,Ie,1,2,"ion-img",104)(11,ke,3,2,"a",105)(12,ye,4,1,"video",106)(13,Oe,8,5,"ion-row",107),e.j41(14,"ion-row"),e.DNE(15,Ge,5,4,"ion-col",27),e.k0s(),e.j41(16,"ion-row"),e.DNE(17,Se,3,4,"ion-col",108),e.j41(18,"ion-col",109),e.DNE(19,Ne,2,0,"span",91),e.j41(20,"span"),e.EFF(21),e.nI1(22,"date"),e.k0s(),e.DNE(23,Fe,1,0,"ion-img",110)(24,Be,1,0,"ion-icon",111),e.k0s()()()()()()()()),2&o){const n=e.XpG().$implicit;e.R7$(10),e.Y8G("ngIf",(null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".jpg"))||(null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".jpeg"))||(null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".png"))),e.R7$(),e.Y8G("ngIf",null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".pdf")),e.R7$(),e.Y8G("ngIf",n.attachment_path&&(null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".mp4"))),e.R7$(),e.Y8G("ngIf",null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".mp3")),e.R7$(2),e.Y8G("ngIf",n.content),e.R7$(2),e.Y8G("ngIf",null==n.attachment_name?null:n.attachment_name.toLowerCase().endsWith(".mp3")),e.R7$(2),e.Y8G("ngIf","1"==n.edited),e.R7$(2),e.JRh(e.i5U(22,10,n.created_at,"hh:mm a")),e.R7$(2),e.Y8G("ngIf",""!=n.item_id),e.R7$(),e.Y8G("ngIf",""==n.item_id)}}function $e(o,a){if(1&o&&(e.j41(0,"div",81),e.DNE(1,je,18,6,"ion-item-sliding",27)(2,Xe,25,13,"ion-item-sliding",27),e.k0s()),2&o){const n=a.$implicit,t=a.index,i=e.XpG(2);e.Y8G("ngClass",e.eq3(5,re,-1!==i.currentMatchIndex&&i.matchedIndexes[i.currentMatchIndex]===t)),e.BMQ("data-index",t)("data-id-index",n.item_id),e.R7$(),e.Y8G("ngIf",i.filteredParams.isIndividualChatId==n.sender_id),e.R7$(),e.Y8G("ngIf",i.filteredParams.execid==n.sender_id)}}function Ve(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-fab",127)(1,"ion-fab-button",128),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.scrollMoveToBottom())}),e.nrm(2,"i",129),e.k0s()()}}function ze(o,a){if(1&o&&(e.j41(0,"ion-col",62),e.nrm(1,"ion-icon",138),e.k0s()),2&o){const n=e.XpG(3);e.AVh("grow",n.checkTextareaHeight())}}function Ae(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-col",11)(1,"ion-row",130)(2,"ion-col",131),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.toggleEmojiPicker())}),e.nrm(3,"ion-img",132),e.k0s(),e.j41(4,"ion-col",133)(5,"ion-textarea",134,6),e.mxI("ngModelChange",function(i){e.eBV(n);const s=e.XpG(2);return e.DH7(s.message,i)||(s.message=i),e.Njj(i)}),e.bIt("ionInput",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.checkTextareaHeight())}),e.k0s()(),e.j41(7,"ion-col",62)(8,"input",135,7),e.bIt("change",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.handleFile(i))}),e.k0s(),e.j41(10,"ion-icon",136),e.bIt("click",function(){e.eBV(n);const i=e.sdS(9);return e.Njj(i.click())}),e.k0s()(),e.DNE(11,ze,2,2,"ion-col",137),e.k0s()()}if(2&o){const n=e.XpG(2);e.R7$(2),e.AVh("grow",n.checkTextareaHeight()),e.R7$(2),e.Y8G("size",""==n.message?7:8.5),e.R7$(),e.R50("ngModel",n.message),e.R7$(2),e.AVh("grow",n.checkTextareaHeight()),e.R7$(4),e.Y8G("ngIf",""==n.message)}}function De(o,a){if(1&o&&(e.j41(0,"ion-col",81)(1,"div",139)(2,"span",21),e.EFF(3),e.k0s()(),e.j41(4,"div",140),e.nrm(5,"ion-icon",141),e.j41(6,"span",21),e.EFF(7,"Slide to cancel"),e.k0s()()()),2&o){const n=e.XpG(2);e.Y8G("ngClass",e.eq3(4,ce,n.isHolding)),e.R7$(3),e.JRh(n.formattedTime),e.R7$(),e.xc7("transform","translateX("+n.translateX+"px)")}}function Ye(o,a){if(1&o){const n=e.RV6();e.j41(0,"i",142),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.sendMessage())}),e.k0s()}}function Le(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-icon",143),e.bIt("mousedown",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onPress(i))})("mousemove",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onMove(i))})("mouseup",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onRelease())})("mouseleave",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onRelease())})("touchstart",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onPress(i))})("touchmove",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.onMove(i))})("touchend",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onRelease())})("touchcancel",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.onRelease())}),e.k0s()}if(2&o){const n=e.XpG(2);e.xc7("transform","translateX("+n.translateX+"px) scale("+(n.isHolding?2:1)+")")}}function We(o,a){if(1&o){const n=e.RV6();e.j41(0,"ion-row")(1,"ion-col")(2,"emoji-mart",144),e.bIt("emojiSelect",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.addEmoji(i))}),e.k0s()()()}2&o&&(e.R7$(2),e.Y8G("showPreview",!1))}function Ue(o,a){if(1&o){const n=e.RV6();e.DNE(0,he,2,0,"div",9),e.j41(1,"ion-header"),e.DNE(2,ge,19,1,"ion-toolbar",45)(3,ue,6,3,"ion-toolbar",27)(4,Ce,7,2,"ion-row",27),e.k0s(),e.j41(5,"ion-content",46,2),e.bIt("ionScroll",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.onScroll(i))}),e.EFF(7),e.nI1(8,"json"),e.nI1(9,"json"),e.DNE(10,$e,3,7,"div",47)(11,Ve,3,0,"ion-fab",48),e.k0s(),e.j41(12,"ion-footer",49)(13,"ion-row"),e.DNE(14,Ae,12,7,"ion-col",50)(15,De,8,6,"ion-col",51),e.j41(16,"ion-col",52),e.DNE(17,Ye,1,0,"i",53)(18,Le,1,2,"ion-icon",54),e.k0s()(),e.DNE(19,We,3,1,"ion-row",27),e.k0s()}if(2&o){const n=e.XpG();e.Y8G("ngIf",n.showSpinner),e.R7$(2),e.Y8G("ngIf",!n.isOnetoOneChatSearch),e.R7$(),e.Y8G("ngIf",n.isOnetoOneChatSearch),e.R7$(),e.Y8G("ngIf",null==n.one2oneChats?null:n.one2oneChats.executives),e.R7$(3),e.Lme(" ",e.bMT(8,15,n.data)," ",e.bMT(9,17,n.recordedAudioFile)," "),e.R7$(3),e.Y8G("ngForOf",null==n.one2oneChats?null:n.one2oneChats.details)("ngForTrackBy",n.trackByMsgId),e.R7$(),e.Y8G("ngIf",!n.isAtBottom),e.R7$(3),e.Y8G("ngIf",!n.isHolding),e.R7$(),e.Y8G("ngIf",n.isHolding),e.R7$(),e.Y8G("ngClass",e.eq3(19,ae,n.removePointerEvent()&&""!=n.message)),e.R7$(),e.Y8G("ngIf",""!=n.message),e.R7$(),e.Y8G("ngIf",""==n.message),e.R7$(),e.Y8G("ngIf",n.showEmojiPicker)}}let He=(()=>{var o;class a{constructor(t,i,s,r,c,h,_,g,u){this.activeRoute=t,this.router=i,this.location=s,this.menuCtrl=r,this.sharedService=c,this._whatsappEchoService=h,this.toastController=_,this.popoverController=g,this.cdr=u,this.filteredParams={selectedChat:"",loginid:localStorage.getItem("UserId"),crmtype:"",execid:"",isIndividualChatId:"",sender_id:"",chatListSearch:""},this.isIndividualChatModal=!1,this.message="",this.one2oneChats=[],this.localStorage=localStorage,this.currentMatchIndex=-1,this.matchedIndexes=[],this.showSpinner=!1,this.isAdmin=!1,this.isAtBottom=!1,this.searchSubject=new D.B,this.isPlaying=!1,this.progress=0,this.currentTime=0,this.duration=0,this.isRecording=!1,this.recordedAudio=null,this.audioUrl=null,this.recordingSeconds=0,this.formattedTime="00:00",this.isHolding=!1,this.startX=0,this.currentX=0,this.translateX=0,this.cancelThreshold=50,this.isOpened=!1,this.eventHandler=m=>{var f;null!==(f=this.container)&&void 0!==f&&f.nativeElement.contains(m.target)||(this.isOpened=!1,window.removeEventListener("click",this.eventHandler))},this.showEmojiPicker=!1}ngOnInit(){var t=this;this.activeRoute.queryParams.subscribe(function(){var i=(0,I.A)(function*(s){t.getQueryParams(),t.userid=t.localStorage.getItem("UserId"),""!=t.filteredParams.chatListSearch&&(t.allChats=[],t.allChats1=[],t.fetchData(t.filteredParams.chatListSearch)),t._whatsappEchoService.listenToChannel("database-changes",".DatabaseNotification",r=>{0==t.one2oneChats.length&&(t.one2oneChats=[]);const c=r[1];if(Array.isArray(c)&&c.length>0){let m,f;var h,_,g,u;if(c.length>1?m=c[c.length-1]:1==c.length&&(m=c[0]),0!=t.one2oneChats.length&&(f=null===(h=t.one2oneChats)||void 0===h?void 0:h.details.some(C=>C.item_id===m.item_id)),!f)m.sender_id==t.userid||m.sender_id==(null===(_=t.selectedChat)||void 0===_?void 0:_.customer_number)||"1"==t.userid&&m.sender_id==t.filteredParams.execid?(t.one2oneChats.details=null===(g=t.one2oneChats)||void 0===g?void 0:g.details.filter(C=>""!=C.item_id),null===(u=t.one2oneChats)||void 0===u||u.details.push(m)):1==c.length&&t.getChatListForWhatsAppFreshChat().subscribe(C=>{var b,M;t.allChats=C,t.allChats1=C;let P=null===(b=t.allChats)||void 0===b?void 0:b.filter(j=>j.customer_number==t.filteredParams.isIndividualChatId);var w,k;t.selectedChat=P[0],(m.sender_id==t.userid||m.sender_id==(null===(M=t.selectedChat)||void 0===M?void 0:M.customer_number)||"1"==t.userid&&m.sender_id==t.filteredParams.execid)&&(t.one2oneChats.details=null===(w=t.one2oneChats)||void 0===w?void 0:w.details.filter(j=>""!=j.item_id),null===(k=t.one2oneChats)||void 0===k||k.details.push(m))}),t.scrollMoveToBottom()}t.one2oneChats||(t.one2oneChats=[])}),t.getAllWhatsAppChats(),t.isAdmin="1"==t.localStorage.getItem("Role"),t.getexecutiveslist(),t.searchSubject.pipe((0,Y.B)(300)).subscribe(r=>{t.fetchData(r)})});return function(s){return i.apply(this,arguments)}}())}getChatListForWhatsAppFreshChat(){return this.sharedService.fetchAllWhatsAppChats({loginid:this.userid,execid:this.filteredParams.execid})}onOnetoOneChatSearch(){this.isOnetoOneChatSearch=!0,this.popoverController.dismiss()}onOneToOneSearchChange(){this.findMatches(),this.currentMatchIndex=-1}findMatches(){var t;this.matchedIndexes=[],null===(t=this.one2oneChats)||void 0===t||t.forEach((i,s)=>{i.content&&this.oneToOneChatSearch&&i.content.toLowerCase().includes(this.oneToOneChatSearch.toLowerCase())&&this.matchedIndexes.push(s)})}navigateMatch(t){if(!this.matchedIndexes.length)return;this.currentMatchIndex="next"===t?(this.currentMatchIndex+1)%this.matchedIndexes.length:(this.currentMatchIndex-1+this.matchedIndexes.length)%this.matchedIndexes.length;const s=document.querySelector(`[data-index="${this.matchedIndexes[this.currentMatchIndex]}"]`);s&&s.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{s.classList.remove("selected-match")},2e3)}getOne2OneChats(){var t,i;this.filteredParams.isIndividualChatId.split("_");const r={loginid:this.filteredParams.execid?this.filteredParams.execid:""!=this.selectedChat&&null!=this.selectedChat?null===(t=this.selectedChat)||void 0===t?void 0:t.exec_id:"1",recieverid:""!=this.selectedChat&&null!=this.selectedChat?null===(i=this.selectedChat)||void 0===i?void 0:i.customer_number:this.allChats1[0].customer_number};this.sharedService.fetchWhatsAppOne2OneChats(r).subscribe(c=>{this.one2oneChats=c,this.filteredParams.execid?(this.selectedExec=this.one2oneChats.executives.filter(h=>h.exec_id==this.filteredParams.execid),this.selectedExec=this.selectedExec[0].exec_id):(this.selectedExec=this.one2oneChats.executives[0].exec_id,this.filteredParams.execid=this.selectedExec),this.showSpinner=!1}),setTimeout(()=>{this.scrollMoveToBottom()},1e3)}scrollMoveToBottom(){setTimeout(()=>{var t;null===(t=this.content)||void 0===t||t.scrollToBottom(300),this.cdr.detectChanges()},200)}onBackbutton(){this.location.back()}openEndMenu(){this.sharedService.isMenuOpen=!0,this.menuCtrl.open("end")}getQueryParams(){const t=window.location.search,i={};new URLSearchParams(t).forEach((s,r)=>{i[r]=s}),Object.keys(this.filteredParams).forEach(s=>{i.hasOwnProperty(s)?this.filteredParams[s]=i[s]:"propid"==s&&"ranavPropId"in localStorage?this.filteredParams[s]="28773":"loginid"!==s&&"limit"!==s&&"limitrows"!==s&&(this.filteredParams[s]="")})}addQueryParams(){const t={};let i=!1;for(const s in this.filteredParams)if(this.filteredParams.hasOwnProperty(s)){const r=""!==this.filteredParams[s]?this.filteredParams[s]:null;this.activeRoute.snapshot.queryParams[s]!==r&&(i=!0),t[s]=r}this.router.navigate([],{queryParams:t,queryParamsHandling:"merge"}).then(()=>{})}onChatFilterSelected(t){this.filteredParams.selectedChat=t,"exec"!=t&&this.addQueryParams()}getAllWhatsAppChats(){this.showSpinner=!0,this.sharedService.fetchAllWhatsAppChats(this.filteredParams).subscribe(t=>{"True"==t.status?(this.allChats=t.details,this.showSpinner=!1,"unread"==this.filteredParams.selectedChat?this.allChats1=t.details.filter(i=>{if("1"==i.unreadcount)return i}):""!=this.filteredParams.isIndividualChatId||""!=this.filteredParams.chatListSearch?(this.selectedChat=t.details.filter(i=>i.customer_number==this.filteredParams.isIndividualChatId),this.selectedChat=this.selectedChat[0],setTimeout(()=>{this.getOne2OneChats()},1e3)):this.allChats1=t.details,this.loader.dismiss()):(this.showSpinner=!1,this.allChats=[],this.allChats1=[])})}searchClient(t){const i=t.target.value;i.length>=5?this.searchSubject.next(i):this.allChats1=this.allChats}fetchData(t){let i;/^[\d\s+]+$/.test(t)?(i=t.replace(/\s+/g,""),i=i.slice(-10)):i=t,this.sharedService.searchLeads(i,this.filteredParams.crmtype,"1"==localStorage.getItem("Role")?"":localStorage.getItem("UserId"),"").subscribe({next:s=>{if("True"==s.status)if(this.filteredParams.chatListSearch&&this.filteredParams.isIndividualChatId)this.allChats1=s.Searchlist.filter(r=>r.customer_number==this.filteredParams.isIndividualChatId);else{this.allChats1=s.Searchlist;const r=new Map;s.Searchlist.forEach(c=>{var h,_,g,u,m,f,C;const b=null!==(h=c.customer_number)&&void 0!==h?h:"",M=null!==(_=c.customer_name)&&void 0!==_?_:"",P=null!==(g=c.execname)&&void 0!==g?g:"",w=null!==(u=c.Lead_stage)&&void 0!==u?u:"",k=null!==(m=c.customer_IDPK)&&void 0!==m?m:"",j=null!==(f=c.crm_type)&&void 0!==f?f:"",tt=null!==(C=c.propid)&&void 0!==C?C:"",S=b+"_"+w+"_"+j;if(r.has(S)){const B=r.get(S);P&&B.execnames.add(P),B.originalLeads.push(c)}else r.set(S,{customer_number:b,customer_name:M,Lead_stage:w,customer_IDPK:k,crm_type:j,propid:tt,execnames:new Set(P?[P]:[]),originalLeads:[c]})})}else this.allChats1=[]},error:s=>{this.allChats1=[]}})}trackByMsgId(t,i){return i.item_id}getexecutiveslist(){this.sharedService.getexecutiveslist().subscribe(t=>{if(this.execList=t.Executiveslist,""!=this.filteredParams.execid){const i=this.execList.find(s=>s.ID===this.filteredParams.execid);this.selectedExec=i,this.filteredParams.loginid=this.filteredParams.execid}else this.filteredParams.loginid=localStorage.getItem("UserId")})}onExecutive(t){this.filteredParams.loginid=t.value.ID,this.filteredParams.execid=t.value.ID,this.addQueryParams()}openChat_previewModal(t){this.filteredParams.isIndividualChatId=t.customer_number,this.showSpinner=!0,this.addQueryParams()}onIndividualChatBack(){this.filteredParams={selectedChat:"all",loginid:localStorage.getItem("UserId"),crmtype:"",execid:"",isIndividualChatId:"",sender_id:"",chatListSearch:""},this.message="",this.showEmojiPicker=!1,this.oneToOneChatSearch="",this.addQueryParams()}checkTextareaHeight(){return document.getElementById("messageRow").offsetHeight>45}onNumberClick(t){this.dialNumber=t,this.dialNumberModal.present()}onCopyMessage(t){this.dialNumberModal.dismiss()}presentToast(t){var i=this;return(0,I.A)(function*(){(yield i.toastController.create({message:t?"Phone number copied":"Message copied",duration:2e3,cssClass:"custom-toast",position:"bottom"})).present()})()}hasCommonId(t,i){const s=new Set(i.map(r=>r.customer_IDPK));return t.some(r=>s.has(r.customer_IDPK))}whatsAppNumberCheck(t){const i={number:t.customer_number};v().fire({html:"<b>We are checking the number in the database.<br/>Please wait for a moment...</b>",allowOutsideClick:!1,showConfirmButton:!1,heightAuto:!1,didOpen:()=>{v().showLoading()}}),this.sharedService.whatsAppNumberCheck(i).subscribe(s=>{"Channel not found"==s.error?v().fire({title:"Number Not Register",text:"This number not register with What's app",icon:"error",heightAuto:!1,showConfirmButton:!1,showCancelButton:!1,timer:2e3}):(this.filteredParams.isIndividualChatId=t.customer_number,this.addQueryParams(),v().close())})}onScroll(t){this.content.getScrollElement().then(i=>{this.isAtBottom=i.scrollTop+i.offsetHeight>=i.scrollHeight-100})}removePointerEvent(){var t;return 0===(null===(t=this.message)||void 0===t?void 0:t.trim().length)}sendMessage(){this.sharedService.oneToOneChatCheck({recieverid:this.filteredParams.isIndividualChatId,message:this.message,senderid:this.selectedExec?this.selectedExec:"1"}).subscribe(i=>{this.message=""})}downloadFileFromUrl(t,i){const r=t;fetch("https://chat.right2shout.in"+t).then(c=>c.blob()).then(c=>{const h=window.URL.createObjectURL(c),_=document.createElement("a");_.href=h,_.download=r,_.click(),window.URL.revokeObjectURL(h)}).catch(c=>{console.error("Download failed:",c)})}goFullScreen(){const t=document.getElementById("myVideo");if(t)try{t.requestFullscreen?t.requestFullscreen():t.webkitEnterFullscreen?t.webkitEnterFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}catch(i){console.error("Fullscreen failed:",i)}}handleFile(t){const i=t.target,s=i.files;s&&Array.from(s).forEach(r=>{var c;if(!["application/pdf","image/png","image/jpeg","video/mp4","video/quicktime","video/x-matroska","video/x-msvideo","audio/mpeg"].includes(r.type))return this.resetFileInput(i),void v().fire({title:"Invalid File Type",text:"Only PDF, PNG, JPEG, and video files are allowed.",icon:"error",showConfirmButton:!1,timer:2e3,heightAuto:!1});if(r.size>1e8)return this.resetFileInput(i),void v().fire({title:"File Size Exceeded",text:"File Size limit is 100MB",icon:"warning",showConfirmButton:!1,timer:1500,heightAuto:!1});const _=new FormData;_.append("senderid",this.selectedExec?this.selectedExec:this.localStorage.getItem("UserId")),_.append("recieverid",null===(c=this.selectedChat)||void 0===c?void 0:c.customer_number),_.append("message",this.message||""),_.append("chattype","application/pdf"==r.type?"document":"image/png"==r.type||"image/jpeg"==r.type?"image":"video/mp4"==r.type?"video":"audio/mpeg"==r.type?"audio":""),_.append("attachment",r),this.sharedService.sendWhatsAppAttachment(_).subscribe(g=>{this.message="",this.getAllWhatsAppChats(),setTimeout(()=>{this.getOne2OneChats(),this.scrollMoveToBottom()},100),this.resetFileInput(i)})})}resetFileInput(t){t.value=""}togglePlay(t){this.isPlaying?(t.pause(),this.isPlaying=!1):(t.play(),this.isPlaying=!0)}updateProgress(t){this.currentTime=1e3*t.currentTime,this.duration=1e3*t.duration,this.progress=t.currentTime/t.duration*100}audioEnded(){this.progress=0,this.currentTime=0,this.isPlaying=!1}seekAudio(t,i){const s=t.detail.value;i.currentTime=s/1e3,this.currentTime=s}setDuration(t){this.duration=1e3*t.duration}requestPermission(){return(0,I.A)(function*(){yield O.requestAudioRecordingPermission()})()}startRecording(){var t=this;return(0,I.A)(function*(){(yield O.hasAudioRecordingPermission()).value||(yield t.requestPermission()),t.isRecording=!0,t.recordedAudio=null,t.recordingSeconds=0,t.updateFormattedTime(),t.recordingTimer=setInterval(()=>{t.recordingSeconds++,t.updateFormattedTime()},1e3),yield O.startRecording()})()}updateFormattedTime(){const t=Math.floor(this.recordingSeconds/60),i=this.recordingSeconds%60;this.formattedTime=String(t).padStart(2,"0")+":"+String(i).padStart(2,"0")}stopRecording(){var t=this;return(0,I.A)(function*(){var i,s,r;t.isRecording=!1,t.recordingTimer&&(clearInterval(t.recordingTimer),t.recordingTimer=null);const c=yield O.stopRecording();if(t.data=c.value,t.recordedAudio=(null===(i=c.value)||void 0===i?void 0:i.recordDataBase64)||null,t.recordedAudio&&(t.audioUrl="data:audio/mp4;base64,"+t.recordedAudio),null===(s=c.value)||void 0===s||!s.recordDataBase64)return void console.error("No recording data returned");const g=null===(r=c.value)||void 0===r?void 0:r.mimeType;t.base64ToFile(t.audioUrl,"recording.mp3",g)})()}playAudio(){this.audioUrl&&new Audio(this.audioUrl).play()}onPress(t){this.isHolding=!0;const i=document.getElementById("recorder_icon");i&&i.classList.add("grow"),this.startX=this.getX(t),this.startRecording()}onMove(t){this.isHolding&&(this.currentX=this.getX(t),this.translateX=Math.max(-80,Math.min(0,this.currentX-this.startX)))}onRelease(){this.isHolding=!1;const t=document.getElementById("recorder_icon");t&&t.classList.remove("grow"),Math.abs(this.translateX)>this.cancelThreshold||this.sendAudioFile(this.recordedAudioFile),this.translateX=0,this.stopRecording()}getX(t){return t instanceof MouseEvent?t.clientX:t.touches[0].clientX}onLeave(){this.isHolding=!1}closeSearch(){this.recorderClass="slide-out"}base64ToFile(t,i,s){const r=atob(t),c=new Array(r.length);for(let u=0;u<r.length;u++)c[u]=r.charCodeAt(u);const h=new Uint8Array(c),_=new Blob([h],{type:s}),g=new File([_],i,{type:s});return this.recordedAudioFile=g,new File([_],i,{type:s})}sendAudioFile(t){var i;const s=new FormData;s.append("senderid",this.selectedExec?this.selectedExec:this.localStorage.getItem("UserId")),s.append("recieverid",null===(i=this.selectedChat)||void 0===i?void 0:i.customer_number),s.append("message",this.message||""),s.append("chattype","audio"),s.append("attachment",t),this.sharedService.sendWhatsAppAttachment(s).subscribe(r=>{this.message="",this.getAllWhatsAppChats(),setTimeout(()=>{this.getOne2OneChats(),this.scrollMoveToBottom()},100)})}emojiSelected(t){var i;null===(i=this.emojiInput$)||void 0===i||i.next(t.emoji.native)}toggled(){this.isOpened=!this.isOpened,this.isOpened?window.addEventListener("click",this.eventHandler):window.removeEventListener("click",this.eventHandler)}clearSearch(){this.router.navigate([],{queryParams:{chatListSearch:null},queryParamsHandling:"merge"})}onExecChange(t){this.filteredParams.loginid=t.detail.value,this.filteredParams.execid=t.detail.value,this.addQueryParams()}addEmoji(t){this.message+=t.emoji.native}toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker}}return(o=a).\u0275fac=function(t){return new(t||o)(e.rXU(T.nX),e.rXU(T.Ix),e.rXU(x.aZ),e.rXU(d._t),e.rXU(W.d),e.rXU(K),e.rXU(d.K_),e.rXU(d.IE),e.rXU(e.gRc))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-clients-chats"]],viewQuery:function(t,i){if(1&t&&(e.GBs(te,7),e.GBs(ne,5),e.GBs(ie,5),e.GBs(oe,5),e.GBs(se,5)),2&t){let s;e.mGM(s=e.lsd())&&(i.loader=s.first),e.mGM(s=e.lsd())&&(i.chat_preview=s.first),e.mGM(s=e.lsd())&&(i.dialNumberModal=s.first),e.mGM(s=e.lsd())&&(i.content=s.first),e.mGM(s=e.lsd())&&(i.container=s.first)}},inputs:{emojiInput$:"emojiInput$"},decls:37,vars:10,consts:[["loader",""],["chat_preview",""],["chat_previewIon_content",""],["messageContainer",""],["videoPlayer",""],["audio",""],["messageInput",""],["fileInput",""],["trigger","open-loading",1,"loader"],["class","content_center loader",4,"ngIf"],[1,"ion-text-center","header"],["size","10"],[1,"d-flex"],["src","../../assets/CRMimages/whatsapp_icon.svg",2,"width","30px"],[1,"pl-1",2,"font-size","20px","color","#39ae41"],["size","2",1,"content_center",3,"click"],["name","menu",1,"menu_icon"],[1,"paddingZero"],["placeholder","Search a name / mobile number",1,"font-size12-familyPoppins","font-weight400","mainSearch",3,"ionInput","ngModelChange","ionClear","ngModel"],[1,"chat_filters"],[1,"content_center",3,"ngClass"],[1,"font-size12-familyPoppins"],["size","3",1,"content_center",3,"click"],[1,"content_center"],[2,"padding","1px !important",3,"ngClass"],["appendTo","body","optionLabel","Name","placeholder","Select a Executive",1,"exec",3,"onChange","ngModelChange","options","ngModel"],["class","borderBottom",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["trigger","open-modal",3,"isOpen"],[1,"content_center","loader"],["src","../assets/CRMimages/animation/loader.gif",2,"width","300px","height","70px"],[1,"borderBottom",3,"click"],["size","2",1,"content_center","profile-wrapper"],[1,"profile-image-wrapper"],["src","../../assets/CRMimages/client_chat_profile_icon.svg"],["size","10",1,"chat-message-preview"],["size","9",1,"center-vertically"],[1,"ellipse_span"],["size","3",1,"content_center"],["size","0.5",1,"content_center"],[1,"latest_message_content"],["size","2","class","content_center",4,"ngIf"],["size","2",1,"content_center"],[1,"unreadChat_count"],[1,"font-size16-familyPoppins","font-colorgreen"],["style","border-bottom: 0.5px solid #E4E4E4",4,"ngIf"],["scrollEvents","true",1,"bg-img",3,"ionScroll"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],[1,"bg-img"],["size","10",4,"ngIf"],[3,"ngClass",4,"ngIf"],["size","2",1,"content_center",3,"ngClass"],["class","fa fa-paper-plane",3,"click",4,"ngIf"],["id","recorder_icon","name","mic","class","mic",3,"transform","mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","touchcancel",4,"ngIf"],["name","circular",2,"color","white"],[2,"border-bottom","0.5px solid #E4E4E4"],["slot","start",3,"click"],["name","chevron-back-outline",2,"font-size","24px"],["size","10",1,"chat-message-preview","center-vertically"],[2,"width","100%"],["size","9"],["size","1.5",1,"content_center"],["name","call-outline",2,"color","#000000"],["size","1.5","id","search",1,"verticleEllipsis","content_center"],["name","ellipsis-vertical"],["trigger","search","side","bottom","alignment","center",1,"newAndselect_popover"],[3,"click"],[2,"display","flex","align-items","center","border-bottom","0.5px solid #E4E4E4"],["name","arrow-back",2,"font-size","24px",3,"click"],["placeholder","Search ...",1,"addMemberSearch",3,"ngModelChange","ionInput","ngModel","showClearButton","showCancelButton"],["name","chevron-up-outline",2,"padding","0 5px",3,"click"],["name","chevron-down-outline",2,"padding","0 5px",3,"click"],[1,"font-size14-familyPoppins"],[2,"display","flex","align-items","center","flex-wrap","wrap"],["classs","font-size12-familyPoppins",2,"margin-right","8px"],[2,"display","flex","gap","12px",3,"ngModelChange","ionChange","ngModel"],["style","display: flex; align-items: center; gap: 4px;",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","gap","4px"],["classs","font-size12-familyPoppins",2,"color","#1DC9A0"],[3,"value"],[3,"ngClass"],["lines","none",2,"--background","none"],["size","12",1,"chat-align"],[1,"chat-wrapper"],["aria-hidden","true","data-icon","tail-in",1,"_amk7"],["viewBox","0 0 8 13","height","13","width","8","preserveAspectRatio","xMidYMid meet","version","1.1","x","0px","y","0px",2,"color","white"],["opacity","0.13","d","M1.533,3.568L8,12.193V1H2.812 C1.042,1,0.474,2.156,1.533,3.568z"],["fill","currentColor","d","M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"],[1,"received-chat-card"],[1,"timestamp"],["style","padding-right:5px;",4,"ngIf"],[1,"message-text",2,"white-space","normal",3,"title"],[4,"ngFor","ngForOf"],["class","highlight-number","appLongPress","",3,"innerHTML","longPress","click",4,"ngIf"],[3,"innerHTML",4,"ngIf"],["appLongPress","",1,"highlight-number",3,"longPress","click","innerHTML"],[3,"innerHTML"],[2,"padding-right","5px"],[1,"sender-message-bubble"],["viewBox","0 0 8 13","height","13","width","8","preserveAspectRatio","xMidYMid meet",2,"position","absolute","top","0","right","2px","color","#d9fdd3"],["opacity","0.13","d","M5.188,1H0v11.193l6.467-8.625 C7.526,2.156,6.958,1,5.188,1z"],["fill","currentColor","d","M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"],[1,"send-chat-card",3,"photoGalleryGroup"],["style","width: 150px;",3,"photoGallery","src",4,"ngIf"],["class","content_center","id","canvasId",3,"href","click",4,"ngIf"],["id","myVideo","controls","","height","100%","width","200",3,"touchstart",4,"ngIf"],["class","audio_row",4,"ngIf"],["size","5","class","timestamp p-0 ","style","justify-content: center;",4,"ngIf"],[1,"timestamp","center-vertically"],["style","width: 18px;padding-left: 4px;","src","../../assets/CRMimages/double-tick-read.svg",4,"ngIf"],["name","time-outline","style","color: rgb(11, 122, 178);font-size: 14px; padding-left: 5px;",4,"ngIf"],[2,"width","150px",3,"photoGallery","src"],["id","canvasId",1,"content_center",3,"click","href"],["src","../../assets/CRMimages/pdfred.png",2,"width","26px"],["class","font-size12-familyPoppins",4,"ngIf"],["id","myVideo","controls","","height","100%","width","200",3,"touchstart"],["type","video/mp4","type","video/mp4",3,"src"],[1,"audio_row"],[1,"play-btn",3,"click"],[3,"name"],["step","1",1,"audioRange",3,"ionChange","value","min","max"],[3,"loadedmetadata","timeupdate","ended"],["type","audio/mpeg",3,"src"],["size","5",1,"timestamp","p-0",2,"justify-content","center"],["src","../../assets/CRMimages/double-tick-read.svg",2,"width","18px","padding-left","4px"],["name","time-outline",2,"color","rgb(11, 122, 178)","font-size","14px","padding-left","5px"],["vertical","bottom","horizontal","end","slot","fixed"],[2,"font-size","23px","width","40px","height","40px","--background","#ffffff",3,"click"],[1,"fas","fa-angle-double-down",2,"color","rgba(0, 0, 0, .6)"],["id","messageRow",1,"message-row",2,"width","100%"],["size","2","size","1.5",1,"content_center","paddingZero",3,"click"],["src","../../assets/CRMimages/whatsapp_imoji_icon.svg"],[1,"paddingZero","content_center",3,"size"],["rows","1","autoGrow","true","placeholder","Message",1,"font-size14-familyPoppins",3,"ngModelChange","ionInput","ngModel"],["type","file","multiple","",2,"display","none",3,"change"],["name","attach-outline",2,"font-size","22px",3,"click"],["size","1.5","class","content_center",3,"grow",4,"ngIf"],["name","camera-outline",2,"font-size","22px"],[1,"pl-4"],[1,"recordCancel-slide"],["name","chevron-back-outline",2,"color","rgba(0, 0, 0, .6)"],[1,"fa","fa-paper-plane",3,"click"],["id","recorder_icon","name","mic",1,"mic",3,"mousedown","mousemove","mouseup","mouseleave","touchstart","touchmove","touchend","touchcancel"],[3,"emojiSelect","showPreview"]],template:function(t,i){if(1&t){const s=e.RV6();e.nrm(0,"ion-loading",8,0),e.DNE(2,le,2,0,"div",9),e.j41(3,"ion-header")(4,"ion-toolbar",10)(5,"ion-row")(6,"ion-col",11)(7,"ion-row")(8,"ion-col",12),e.nrm(9,"ion-img",13),e.j41(10,"span",14),e.EFF(11,"WhatsApp "),e.k0s()()()(),e.j41(12,"ion-col",15),e.bIt("click",function(){return e.eBV(s),e.Njj(i.openEndMenu())}),e.nrm(13,"ion-icon",16),e.k0s()()()(),e.j41(14,"ion-row")(15,"ion-col",17)(16,"ion-searchbar",18),e.bIt("ionInput",function(c){return e.eBV(s),e.Njj(i.searchClient(c))}),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.filteredParams.chatListSearch,c)||(i.filteredParams.chatListSearch=c),e.Njj(c)}),e.bIt("ionClear",function(){return e.eBV(s),e.Njj(i.clearSearch())}),e.k0s()()(),e.j41(17,"ion-row")(18,"div",19)(19,"ion-col",15),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onChatFilterSelected("all"))}),e.j41(20,"div",20)(21,"span",21),e.EFF(22,"All"),e.k0s()()(),e.j41(23,"ion-col",22),e.bIt("click",function(){return e.eBV(s),e.Njj(i.onChatFilterSelected("unread"))}),e.j41(24,"div",20)(25,"span",21),e.EFF(26,"Unread"),e.k0s()()(),e.j41(27,"ion-col",23)(28,"div",24)(29,"p-dropdown",25),e.bIt("onChange",function(c){return e.eBV(s),e.Njj(i.onExecutive(c))}),e.mxI("ngModelChange",function(c){return e.eBV(s),e.DH7(i.selectedExec,c)||(i.selectedExec=c),e.Njj(c)}),e.k0s()()()()(),e.j41(30,"ion-content"),e.DNE(31,_e,19,7,"ion-row",26)(32,pe,4,0,"ion-row",27),e.k0s(),e.nrm(33,"app-common-footer"),e.j41(34,"ion-modal",28,1),e.DNE(36,Ue,20,21,"ng-template"),e.k0s()}2&t&&(e.R7$(2),e.Y8G("ngIf",i.showSpinner),e.R7$(14),e.R50("ngModel",i.filteredParams.chatListSearch),e.R7$(4),e.Y8G("ngClass","all"==i.filteredParams.selectedChat?"bg_textColor":"inactive_bg_textColor"),e.R7$(4),e.Y8G("ngClass","unread"==i.filteredParams.selectedChat?"bg_textColor":"inactive_bg_textColor"),e.R7$(4),e.Y8G("ngClass","exec"==i.filteredParams.selectedChat?"bg_textColor":"inactive_bg_textColor"),e.R7$(),e.Y8G("options",i.execList),e.R50("ngModel",i.selectedExec),e.R7$(2),e.Y8G("ngForOf",i.allChats1),e.R7$(),e.Y8G("ngIf",0==(null==i.allChats1?null:i.allChats1.length)),e.R7$(2),e.Y8G("isOpen",""!=i.filteredParams.isIndividualChatId||i.isIndividualChatModal))},dependencies:[x.YU,x.Sq,x.bT,J.H,Z.a,d.QW,d.hU,d.W9,d.Q8,d.YW,d.M0,d.eU,d.iq,d.KW,d.uz,d.A7,d.rQ,d.KO,d.f0,d.Ob,d.ln,d.S1,d.w2,d.nc,d.ai,d.Sb,d.CF,d.uR,d.Je,d.Gw,R.BC,R.vS,N.ms,E.yY,E.fk,F.Ic,x.TG,x.vh,q.v,ee.P],styles:[".mainSearch .searchbar-input-container{border-radius:4px;--background: rgba(247, 245, 244, 1)}ion-searchbar[_ngcontent-%COMP%]{--box-shadow: none;--placeholder-color: #98a2b3;--icon-color: #98a2b3}  .searchbar-search-icon.sc-ion-searchbar-md{width:20px;height:20px}ion-searchbar[_ngcontent-%COMP%]   .searchbar-search-icon[_ngcontent-%COMP%]{color:red;font-size:1rem}  .searchbar-input.sc-ion-searchbar-md{padding-inline-end:2rem;padding-inline-start:2.6em;font-size:3.8vw}[_ngcontent-%COMP%]::ng-deeep   .searchbar-search-icon[_ngcontent-%COMP%]{inset-inline-start:9px!important}.bg_textColor[_ngcontent-%COMP%]{background:#e7fce3!important;color:#008069!important}.inactive_bg_textColor[_ngcontent-%COMP%]{background:#f0f2f5!important;color:#54656f}.menu_icon[_ngcontent-%COMP%]{color:#39ae41}.chat_filters[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;border-radius:25px;background:#fff;padding:4px}.chat_filters[_ngcontent-%COMP%]{display:flex;overflow-x:scroll;width:100%}  p-dropdown.exec .p-inputwrapper span{padding:5px;font-family:Poppins}  p-dropdown.exec .p-inputwrapper span{padding:5px;font-size:12px;font-family:Poppins;color:#008069!important}  .bg_textColor p-dropdown.exec .p-inputwrapper span{color:#008069!important}  p-dropdown.exec .p-inputwrapper{width:100%!important;border-radius:30px;background-color:#e7fce3!important}  .bg_textColor p-dropdown.exec .p-inputwrapper{background:#e7fce3!important}  p-dropdown.exec .p-inputwrapper .p-dropdown-trigger{width:30px!important}  p-dropdown.exec .p-inputwrapper .p-dropdown-trigger chevrondownicon{width:12px;color:#54656f!important}  .bg_textColor p-dropdown.exec .p-inputwrapper .p-dropdown-trigger chevrondownicon{width:12px;color:#008069!important}  .exec .p-element .p-dropdown-item{padding:5px!important;font-size:12px}.borderBottom[_ngcontent-%COMP%]{border-bottom:1px solid rgb(219,217,217)}.profile-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.profile-image-wrapper[_ngcontent-%COMP%]{position:relative;width:40px;height:40px}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child   ion-col[_ngcontent-%COMP%]:first-child{padding:0 5px}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child   ion-col[_ngcontent-%COMP%]:first-child   span[_ngcontent-%COMP%]{font-size:18px;font-family:Poppins;color:#343434}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child   ion-col[_ngcontent-%COMP%]:nth-child(2){padding:0 4px}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:first-child   ion-col[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{font-size:12px;font-family:Poppins;color:#6a7175}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:nth-child(2)   ion-col[_ngcontent-%COMP%]:first-child{padding:0 0 0 5px}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:nth-child(2)   ion-col[_ngcontent-%COMP%]:nth-child(2){padding-top:0;padding-bottom:0}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:nth-child(2)   ion-col[_ngcontent-%COMP%]:nth-child(2)   ion-img[_ngcontent-%COMP%]{width:22px;height:22px}.chat-message-preview[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]:nth-child(2)   ion-col[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{font-size:12px;font-family:Poppins;color:#6a7175}.ellipse_span[_ngcontent-%COMP%], .latest_message_content[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.unreadChat_count[_ngcontent-%COMP%]{border:1px solid;height:16px;font-size:.6rem;display:flex;align-items:center;color:#fff;background-color:green;font-family:Poppins;justify-content:center;top:-7px;left:23px;font-size:9px;padding:2px 4px;border-radius:10px;font-family:Poppins,sans-serif;white-space:nowrap;z-index:2;line-height:1.2}  .p-element .p-dropdown-item{padding:5px!important;font-size:12px;font-family:Poppins}.loader[_ngcontent-%COMP%]{--background: none;--spinner-color: white}.grow[_ngcontent-%COMP%]{align-items:flex-end!important}.message-row[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{max-height:95px;min-height:0;border-radius:4px;width:100%;overflow-y:auto;--padding-top: 8px !important}.message-row[_ngcontent-%COMP%]{border-radius:50px}.bg-img[_ngcontent-%COMP%]{background-image:url(whatsappChat_bg_img.c6681d3eb407d011.svg);background-size:cover;background-position:center;background-repeat:no-repeat;--background: none}ion-footer.bg-img[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-row[_ngcontent-%COMP%]{background:#fff;padding:4px;border-radius:30px}ion-footer.bg-img[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]:first-child   ion-row[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#606165}ion-footer.bg-img[_ngcontent-%COMP%]{box-shadow:none!important}.sender-message-bubble[_ngcontent-%COMP%]{margin-left:auto}.chat-align[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.chat-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-start;position:relative;width:100%}.message-text[_ngcontent-%COMP%]{font-size:12px;font-family:Poppins,sans-serif;color:#000;flex:1}.received-chat-card[_ngcontent-%COMP%]{border-radius:0 6px 6px;background:#fff;position:relative;z-index:0;max-width:250px;float:right;line-height:14px}.timestamp[_ngcontent-%COMP%]{font-size:10px;font-family:Poppins;color:gray;float:right;display:flex;align-items:flex-end;justify-content:flex-end;padding:0 5px}.selected-match[_ngcontent-%COMP%]{background-color:#bddbea4d!important;border-radius:4px!important;transition:background-color .5s ease!important}ion-searchbar.addMemberSearch[_ngcontent-%COMP%]{flex:1}  .addMemberSearch .searchbar-cancel-button{display:none!important}  .addMemberSearch .searchbar-input{padding:5px!important}.addMemberSearch[_ngcontent-%COMP%]{--border-radius: 25px;background:none;--box-shadow: none;padding:0}ion-radio.radio-checked[_ngcontent-%COMP%]::part(container){border-color:#1dc9a0;--color-checked: #1dc9a0}.font-colorgreen[_ngcontent-%COMP%]{color:#39ae41;font-style:italic}.fa-paper-plane[_ngcontent-%COMP%]{font-size:18px;transform:rotate(50deg);color:#fff;font-size:20px;background:#1dab61;border-radius:20px;padding:8px}.mic[_ngcontent-%COMP%]{font-size:5vh;background:#1dab61;color:#fff;border-radius:23px;padding:9px}.send-chat-card[_ngcontent-%COMP%]{background:#d9fdd3;position:relative;z-index:0;max-width:250px;border-radius:6px 0 6px 6px;float:right;line-height:14px;margin-right:9px;padding:4px}.pointerEvent[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}audio[_ngcontent-%COMP%]::-webkit-media-controls-panel{background:#b7d8e9}.voice-message[_ngcontent-%COMP%]{display:flex;align-items:center;background:#dcf8c6;padding:8px 12px;border-radius:20px;max-width:280px}.play-btn[_ngcontent-%COMP%]{background:none;border:none;color:#6f8171;font-size:20px;cursor:pointer}.duration[_ngcontent-%COMP%]{font-size:12px;color:#6f8171;min-width:40px;text-align:right}.audioRange[_ngcontent-%COMP%]{padding:0 10px;height:20px;--bar-background-active: #6f8171}.audio_row[_ngcontent-%COMP%]{width:200px!important}.mic[_ngcontent-%COMP%]{transition:transform .3s ease}.mic.grow[_ngcontent-%COMP%]{transform:scale(2);border-radius:48%;padding:3vw;font-size:6vw}.slide-in-left[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;animation:_ngcontent-%COMP%_slideIn .5s forwards;background-color:#fff;display:flex;justify-content:space-between;border-radius:30px;align-items:center;max-height:9vh!important}.slide-in-left[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-right:30px;display:flex;justify-content:flex-end;align-items:center}@keyframes _ngcontent-%COMP%_slideIn{to{transform:translate(0);opacity:1}}.slide_out[_ngcontent-%COMP%]{transform:translate(100%);opacity:0;pointer-events:none}.emoji-picker-container[_ngcontent-%COMP%]{position:relative;width:24px;height:24px}.emoji-picker-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:pointer;padding:0;margin:0}.emoji-picker-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:flex;width:24px;height:24px}.emoji-picker-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--str-chat__message-input-tools-color)}.emoji-picker-container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]{z-index:3;position:absolute;bottom:100%;transform:scale(.8);right:0;transform-origin:bottom right}@media only screen and (min-device-width: 1024px){.emoji-picker-container[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]{transform:scale(1)}}  .emoji-mart{width:100%!important}  .emoji-mart-scroll{padding:0 6px 35px}  .emoji-mart-bar{position:fixed;bottom:10px;z-index:99999;background:#fff}  .emoji-mart-category-label{font-family:Poppins;font-size:12px}.emoji-modal[_ngcontent-%COMP%]::part(content){position:fixed!important;bottom:0!important;top:auto!important;border-radius:16px 16px 0 0;height:40vh!important;z-index:9999}"]}),a})();var Qe=l(1635),p=l(4746),G=l(1985),Ke=function(){function o(a){var n=this;this._objectInstance=a,this.onSuccess=new G.c(function(t){return n.successCallback=t.next.bind(t),function(){return n.successCallback=function(){}}}),this.onError=new G.c(function(t){return n.errorCallback=t.next.bind(t),function(){return n.errorCallback=function(){}}}),this.onStatusUpdate=new G.c(function(t){return n.statusCallback=t.next.bind(t),function(){return n.statusCallback=function(){}}})}return o.prototype.getCurrentAmplitude=function(){return(0,p.WE)(this,"getCurrentAmplitude",{},arguments)},o.prototype.getCurrentPosition=function(){return(0,p.WE)(this,"getCurrentPosition",{},arguments)},o.prototype.getDuration=function(){return(0,p.WE)(this,"getDuration",{sync:!0},arguments)},o.prototype.play=function(a){return(0,p.WE)(this,"play",{sync:!0},arguments)},o.prototype.pause=function(){return(0,p.WE)(this,"pause",{sync:!0},arguments)},o.prototype.release=function(){return(0,p.WE)(this,"release",{sync:!0},arguments)},o.prototype.seekTo=function(a){return(0,p.WE)(this,"seekTo",{sync:!0},arguments)},o.prototype.setVolume=function(a){return(0,p.WE)(this,"setVolume",{sync:!0},arguments)},o.prototype.setRate=function(a){return(0,p.WE)(this,"setRate",{sync:!0},arguments)},o.prototype.startRecord=function(){return(0,p.WE)(this,"startRecord",{sync:!0},arguments)},o.prototype.stopRecord=function(){return(0,p.WE)(this,"stopRecord",{sync:!0},arguments)},o.prototype.pauseRecord=function(){return(0,p.WE)(this,"pauseRecord",{sync:!0},arguments)},o.prototype.resumeRecord=function(){return(0,p.WE)(this,"resumeRecord",{sync:!0},arguments)},o.prototype.stop=function(){return(0,p.WE)(this,"stop",{sync:!0},arguments)},Object.defineProperty(o.prototype,"successCallback",{get:function(){return(0,p.PV)(this,"successCallback")},set:function(a){(0,p.jf)(this,"successCallback",a)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"errorCallback",{get:function(){return(0,p.PV)(this,"errorCallback")},set:function(a){(0,p.jf)(this,"errorCallback",a)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"statusCallback",{get:function(){return(0,p.PV)(this,"statusCallback")},set:function(a){(0,p.jf)(this,"statusCallback",a)},enumerable:!1,configurable:!0}),o}(),qe=function(o){function a(){var n=null!==o&&o.apply(this,arguments)||this;return n.MEDIA_NONE=0,n.MEDIA_STARTING=1,n.MEDIA_RUNNING=2,n.MEDIA_PAUSED=3,n.MEDIA_STOPPED=4,n.MEDIA_ERR_ABORTED=1,n.MEDIA_ERR_NETWORK=2,n.MEDIA_ERR_DECODE=3,n.MEDIA_ERR_NONE_SUPPORTED=4,n}return(0,Qe.C6)(a,o),a.prototype.create=function(n){var t;return!0===(0,p.q0)(a.getPluginRef(),null,a.getPluginName())&&(t=new(a.getPlugin())(n)),new Ke(t)},a.pluginName="Media",a.repo="https://github.com/apache/cordova-plugin-media",a.plugin="cordova-plugin-media",a.pluginRef="Media",a.platforms=["Android","Browser","iOS","Windows"],a.decorators=[{type:e._qm}],a}(p.lI);let et=(()=>{var o;class a{}return(o=a).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({providers:[qe],imports:[x.MD,T.iI.forChild([{path:"",component:He}]),$.G,d.bv,R.YN,z.rO,N.kr,E.DE,F.z0,V.iV]}),a})()},5051:(X,y,l)=>{l.d(y,{k:()=>x});const x={RECORDING:"RECORDING",PAUSED:"PAUSED",NONE:"NONE"}}}]);